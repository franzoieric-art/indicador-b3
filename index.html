<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rico Plus - Setup</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-color: #5a23c8;
      --bg-color: #0a0a0a;
      --text-color: #ffffff;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
    body, html { height: 100%; width: 100%; background: var(--bg-color); color: var(--text-color); }

    /* =========================================
       ESTILO DO DASHBOARD (O QUE APARECE DEPOIS)
       ========================================= */
    .dashboard-content {
      padding: 40px;
      max-width: 1200px;
      margin: 0 auto;
      opacity: 0; /* Come√ßa invis√≠vel para dar efeito surpresa */
      transition: opacity 1.5s ease;
    }

    header {
      display: flex; justify-content: space-between; align-items: center; margin-bottom: 60px; border-bottom: 1px solid #333; padding-bottom: 20px;
    }
    .logo { font-size: 24px; font-weight: 700; color: #fff; }
    .logo span { color: var(--main-color); }
    .user-profile { font-size: 14px; color: #888; }

    .hero-section h1 { font-size: 42px; margin-bottom: 10px; }
    .hero-section p { color: #888; font-size: 18px; margin-bottom: 40px; }

    .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    .card { background: #111; padding: 30px; border-radius: 12px; border: 1px solid #222; }
    .card h3 { margin-bottom: 10px; color: var(--main-color); }
    .card p { color: #666; font-size: 14px; line-height: 1.6; }

    /* =========================================
       ESTILO DO ONBOARDING (FORMUL√ÅRIO)
       ========================================= */
    .onboarding-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-color); z-index: 9999;
      display: flex; flex-direction: column; justify-content: center;
      padding: 30px;
    }

    .progress-bar-container { position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: #222; z-index: 10000; }
    .progress-bar-fill { height: 100%; background: var(--main-color); width: 33%; transition: width 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); }

    .onboarding-inner { max-width: 640px; margin: 0 auto; width: 100%; }

    .step { display: none; opacity: 0; transform: translateY(30px); transition: all 0.5s ease-out; }
    .step.active { display: block; opacity: 1; transform: translateY(0); }

    .question-number { color: var(--main-color); font-size: 14px; font-weight: 700; margin-bottom: 15px; display: block; letter-spacing: 1px; }
    .question-number span { border: 1px solid var(--main-color); padding: 2px 7px; border-radius: 4px; margin-right: 10px; }

    h2 { font-size: 32px; font-weight: 300; line-height: 1.3; margin-bottom: 40px; color: #eee; }
    h2 strong { font-weight: 700; color: #fff; }
    .desc { color: #888; margin-bottom: 25px; font-size: 16px; margin-top: -20px; }

    .options-grid { display: flex; flex-direction: column; gap: 12px; width: 100%; }
    .option-card {
      background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 18px 25px; border-radius: 8px;
      color: #fff; font-size: 18px; font-weight: 500; cursor: pointer; text-align: left; transition: all 0.3s; display: flex; align-items: center;
    }
    .option-card:hover { background: rgba(90, 35, 200, 0.1); border-color: var(--main-color); transform: translateX(5px); }
    .key-hint { background: #222; font-size: 12px; padding: 4px 8px; border-radius: 4px; margin-right: 15px; color: #888; font-weight: 700; }

    .big-input {
      width: 100%; background: transparent; border: none; border-bottom: 3px solid #444;
      color: var(--main-color); font-size: 36px; font-weight: 300; padding: 15px 0; outline: none; transition: border-color 0.3s;
    }
    .big-input::placeholder { color: #444; }
    .big-input:focus { border-bottom-color: var(--main-color); }

    .btn-finish {
      margin-top: 50px; background-color: var(--main-color); color: white; font-size: 22px; font-weight: 700;
      border: none; padding: 20px 40px; width: 100%; border-radius: 8px; cursor: pointer;
      display: flex; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 4px 15px rgba(90, 35, 200, 0.3);
    }
    .btn-finish:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(90, 35, 200, 0.5); }

    .footer-brand { position: absolute; bottom: 30px; left: 0; width: 100%; text-align: center; font-size: 14px; color: #666; }
    
    .loading-screen { display: none; text-align: center; margin-top: 100px; }
    .spinner { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid var(--main-color); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 30px auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <div class="progress-bar-container" id="progBarContainer">
    <div class="progress-bar-fill" id="progressBar"></div>
  </div>

  <div class="dashboard-content" id="realContent">
    <header>
      <div class="logo">Rico<span>Plus</span></div>
      <div class="user-profile">Status: <strong>Membro Ativo</strong></div>
    </header>

    <div class="hero-section">
      <h1>Bem-vindo, Trader.</h1>
      <p>Seu setup foi configurado com sucesso. Aqui est√£o seus materiais:</p>
    </div>

    <div class="cards-grid">
      <div class="card">
        <h3>01. Indicador B3</h3>
        <p>Acesse o script atualizado para ProfitPro e comece a testar as regi√µes de valor.</p>
      </div>
      <div class="card">
        <h3>02. Gest√£o de Risco</h3>
        <p>Planilha automatizada para calcular seus stops e alvos baseado na volatilidade.</p>
      </div>
      <div class="card">
        <h3>03. Comunidade VIP</h3>
        <p>Link direto para o grupo de networking com outros operadores de fluxo.</p>
      </div>
    </div>
  </div>

  <div class="onboarding-overlay" id="overlay">
    <div class="onboarding-inner">
      
      <div class="step active" id="step1">
        <span class="question-number"><span>1</span> CLAREZA</span>
        <h2>Qual plataforma voc√™ usa para <strong>operar hoje?</strong></h2>
        <div class="options-grid">
          <button class="option-card" onclick="next(1, 'Plataforma', 'ProfitPro')"><span class="key-hint">A</span> ProfitPro</button>
          <button class="option-card" onclick="next(1, 'Plataforma', 'Tryd')"><span class="key-hint">B</span> Tryd</button>
          <button class="option-card" onclick="next(1, 'Plataforma', 'Outra')"><span class="key-hint">C</span> Outra / Nenhuma</button>
        </div>
      </div>

      <div class="step" id="step2">
        <span class="question-number"><span>2</span> N√çVEL ATUAL</span>
        <h2>H√° quanto tempo voc√™ estuda <strong>Day Trade?</strong></h2>
        <div class="options-grid">
          <button class="option-card" onclick="next(2, 'Tempo', 'Iniciante')"><span class="key-hint">A</span> Sou iniciante (0-6 meses)</button>
          <button class="option-card" onclick="next(2, 'Tempo', 'Intermedi√°rio')"><span class="key-hint">B</span> J√° opero (6 meses - 2 anos)</button>
          <button class="option-card" onclick="next(2, 'Tempo', 'Experiente')"><span class="key-hint">C</span> Experiente (+2 anos)</button>
        </div>
      </div>

      <div class="step" id="step3">
        <span class="question-number"><span>3</span> LIBERA√á√ÉO</span>
        <h2>Para onde devo enviar seu <strong>acesso gratuito?</strong></h2>
        <p class="desc">Prometemos zero spam.</p>
        <input type="email" id="emailInput" class="big-input" placeholder="digite seu melhor e-mail..." required>
        <button class="btn-finish" onclick="finish()">FINALIZAR E ACESSAR üöÄ</button>
      </div>

      <div class="loading-screen" id="finalScreen">
        <div class="spinner"></div>
        <h2 style="margin-bottom: 10px;">Quase l√°...</h2>
        <p style="color: #888;">Estamos preparando seu ambiente no Rico Plus.</p>
      </div>

      <div class="footer-brand">Seguran√ßa por <strong>Rico Plus</strong></div>
    </div>
  </div>

  <script>
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbybxEDLJ7gtHZheLl2bO7K93S56Z77inMMe1kzLIjEGoIou7Z95QtnWNGbFiHBcu0Ds/exec'; 

    let userAnswers = {};

    function next(currentStepNum, field, value) {
      userAnswers[field] = value;
      const currentStepEl = document.getElementById('step' + currentStepNum);
      currentStepEl.style.opacity = '0';
      currentStepEl.style.transform = 'translateY(-40px)'; 

      setTimeout(() => {
        currentStepEl.classList.remove('active');
        const nextStepNum = currentStepNum + 1;
        const nextStepEl = document.getElementById('step' + nextStepNum);
        if(nextStepEl) {
          nextStepEl.classList.add('active');
          const progress = (nextStepNum / 3) * 100;
          document.getElementById('progressBar').style.width = progress + '%';
        }
      }, 500); 
    }

    function finish() {
      const emailInput = document.getElementById('emailInput');
      const emailValue = emailInput.value.trim();

      if(!emailValue.includes('@') || emailValue.length < 5) {
        alert('Por favor, digite um e-mail v√°lido.');
        return;
      }
      
      userAnswers['Email'] = emailValue;
      
      const btn = document.querySelector('.btn-finish');
      btn.innerHTML = "Enviando...";
      btn.style.opacity = "0.5";
      btn.disabled = true;

      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST', mode: 'no-cors', 
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userAnswers)
      }).then(() => {
        // Mostra Loading
        document.getElementById('step3').style.display = 'none';
        document.querySelector('.footer-brand').style.display = 'none';
        document.getElementById('finalScreen').style.display = 'block';
        
        // SIMULA√á√ÉO DO TEMPO DE PROCESSAMENTO
        setTimeout(() => {
          // 1. Remove o Overlay
          const overlay = document.getElementById('overlay');
          const progBar = document.getElementById('progBarContainer');
          
          overlay.style.transition = 'opacity 1s ease';
          overlay.style.opacity = '0';
          progBar.style.opacity = '0';
          
          // 2. Revela o Dashboard
          const content = document.getElementById('realContent');
          content.style.opacity = '1';

          setTimeout(() => {
             overlay.style.display = 'none';
             progBar.style.display = 'none';
          }, 1000);
          
        }, 3000);

      }).catch(err => {
        console.error(err);
        alert('Erro ao conectar. Tente novamente.');
        btn.innerHTML = "FINALIZAR E ACESSAR üöÄ";
        btn.disabled = false;
      });
    }

    document.getElementById('emailInput').addEventListener('keypress', function (e) {
      if (e.key === 'Enter') finish();
    });
  </script>
</body>
</html>
